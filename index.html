<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WordSearch 1v1</title>
    
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="tuto.css">
</head>
<body>

<div id="app" v-cloak>
    
    <div v-if="screen === 'login'" class="container">
        <h1>üß© WordSearch</h1>
        <p>Masukkan nama untuk mula</p>
        <input v-model="myName" placeholder="Nama anda..." @keyup.enter="handleLogin">
        <button @click="handleLogin" class="btn-main">MASUK</button>
        
        <div v-if="isNameSaved" class="footer-actions">
            <button @click="deleteName" class="btn-link">Tukar Akaun</button>
        </div>
    </div>

    <div v-if="screen === 'menu'" class="container">
        <h2>Hai, {{ myName }}!</h2>
        
        <div class="menu-grid">
            <button @click="startSinglePlayer" class="btn-menu">
                <span class="icon">üë§</span> Solo
            </button>
            <button @click="screen = 'lobby'" class="btn-menu">
                <span class="icon">üë•</span> 1v1 Lawan
            </button>
        </div>

        <button @click="showTutorial = true" class="btn-tutorial">‚ùì Cara Main 1v1</button>
        
        <button @click="exitGame" class="btn-link">Keluar</button>
    </div>

    <div v-if="screen === 'lobby'" class="container">
        <h3>Lobby 1v1</h3>
        <div class="id-box">
            <small>ID ANDA:</small>
            <div class="my-id">{{ myId }}</div>
        </div>
        
        <hr>
        
        <div class="connect-box">
            <p>Masukkan ID Lawan:</p>
            <input v-model="peerIdInput" placeholder="Contoh: A1B2" class="input-id">
            <button @click="connectToPeer" class="btn-main">SAMBUNG</button>
        </div>
        
        <button @click="screen = 'menu'" class="btn-link">Kembali</button>
    </div>

    <div v-if="screen === 'game'" class="game-screen">
        <div class="game-header">
            <div class="player">
                <div class="name">{{ myName }}</div>
                <div class="score">{{ myScore }} <small>({{ myWins }} Menang)</small></div>
            </div>
            <div class="vs">VS</div>
            <div class="player">
                <div class="name">{{ opponentName }}</div>
                <div class="score">{{ opponentScore }} <small>({{ opponentWins }} Menang)</small></div>
            </div>
        </div>

        <div class="word-grid">
            <div v-for="(row, rIndex) in grid" :key="rIndex" class="grid-row">
                <div v-for="(char, cIndex) in row" :key="cIndex" 
                     class="cell" 
                     :class="{ 
                        selecting: isSelected(rIndex, cIndex), 
                        found: isFound(rIndex, cIndex),
                        'animate-found': shouldAnimate(rIndex, cIndex)
                     }"
                     @click="handleCellClick(rIndex, cIndex, char)">
                    {{ char }}
                </div>
            </div>
        </div>

        <div class="word-list">
            <span v-for="word in words" :key="word" 
                  :class="{ 'word-found': foundWords.includes(word) }">
                {{ word }}
            </span>
        </div>

        <div class="game-footer">
            <button @click="nextGame(false)" class="btn-next">Next Round</button>
            <button @click="exitGame" class="btn-exit">Tamat</button>
        </div>
    </div>

    <div v-if="showTutorial" class="modal-overlay" @click.self="showTutorial = false">
        <div class="modal-content">
            <h3>Cara Main 1v1 üß©</h3>
            <div class="tutorial-steps">
                <div class="step">
                    <div class="step-num">1</div>
                    <div class="step-text">Pilih mode <b>1v1 Lawan</b> di menu.</div>
                </div>
                <div class="step">
                    <div class="step-num">2</div>
                    <div class="step-text"><b>Pemain A:</b> Berikan "ID ANDA" kepada kawan.</div>
                </div>
                <div class="step">
                    <div class="step-num">3</div>
                    <div class="step-text"><b>Pemain B:</b> Masukkan ID kawan dalam kotak ID Lawan dan tekan <b>Sambung</b>.</div>
                </div>
                <div class="step">
                    <div class="step-num">4</div>
                    <div class="step-text">Siapa jumpa perkataan paling cepat akan menang pusingan tersebut!</div>
                </div>
            </div>
            <button @click="showTutorial = false" class="btn-close-tuto">Faham!</button>
        </div>
    </div>

</div>

<script type="module" src="script.js"></script>

</body>
</html>
